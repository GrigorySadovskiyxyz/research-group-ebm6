function repositionCaption(f){var d=$("div.animation-slider-spacing"),g=d.offset().top,c=d.outerHeight(),b=function(){var m=$(this),k=m.find(":first"),j=parseInt(k.css("margin-top").replace("px","")),p=parseInt(k.css("margin-bottom").replace("px","")),n=k.height()+j+p,h=g+(c/2-n/2);m.css("top",h+"px")};f.find(".box_holder").each(b),f.find(".box_holder_compact").each(b)}function resizeMobileCaption(f){var d=f.find(".box_holder_mobile");if(1==d.length){var g=d.find(".slide_about").length>0||d.find(".video_about").length>0,c=d.children().first();if(c.length>0){var b=0;c.children("div").each(function(){b+=$(this).outerHeight()}),c.children("h2").each(function(){b+=$(this).outerHeight()}),c.children("span").each(function(){b+=$(this).outerHeight()}),g&&(b+=40),d.children().first().animate({height:b},{duration:200,queue:!1}),$("#animation-slider").animate({height:b},{duration:200,queue:!1})}}}function buildHTML(f){var d,g,c;$("#animation-slider").empty(),"enabled"==sliderEnabled||"undefined"!=typeof hqHeader||"undefined"!=typeof lqHeader||"undefined"!=typeof mobileHeader?($(".animation-slider-spacing").attr("style","display: block"),$(".animation-slider").attr("style","display: block")):$(".control_wrap").attr("style","display: none"),"normal"==f&&(buildNav(normalData),$("#normal_tools").append(tools),$("#menusearch").append(search),"undefined"!=typeof videoHQSlider&&"undefined"!=typeof videoEnabled&&videoEnabled?(g=JSON.parse(videoHQSlider),d=buildElements(g,g.a),$("#animation-slider").empty().append(d),$("#content").addClass("image_header_padding")):"undefined"!=typeof hqSlider&&"enabled"==sliderEnabled?(g=JSON.parse(hqSlider),d=buildElements(g,g.a),$("#animation-slider").empty().append(d),initTicker()):"undefined"!=typeof hqHeader&&(c=JSON.parse(hqHeader),d=buildElements(c,c.a),$("#animation-slider").empty().append(d),$("#content").addClass("image_header_padding")),init(f)),"compact"==f&&(buildNav(normalData),$("#normal_tools").append(tools),$("#menusearch").append(search),init(f),"undefined"!=typeof videoLQSlider&&"undefined"!=typeof videoEnabled&&videoEnabled?(g=JSON.parse(videoLQSlider),d=buildElements(g,g.a),$("#animation-slider").empty().append(d),$("#content").addClass("image_header_padding")):"undefined"!=typeof lqSlider&&"enabled"==sliderEnabled?(g=JSON.parse(lqSlider),d=buildElements(g,g.a),$("#animation-slider").empty().append(d),initTicker()):"undefined"!=typeof lqHeader&&(c=JSON.parse(lqHeader),d=buildElements(c,c.a),$("#animation-slider").empty().append(d),$("#content").addClass("image_header_padding"))),"tablet"==f&&(buildNav(normalData),$("#normal_tools").append(tools),$("#menusearch").append(search),"undefined"!=typeof videoLQSlider&&"undefined"!=typeof videoEnabled&&videoEnabled?(g=JSON.parse(videoLQSlider),d=buildElements(g,g.a),$("#animation-slider").empty().append(d),$("#content").addClass("image_header_padding")):"undefined"!=typeof lqSlider&&"enabled"==sliderEnabled?(g=JSON.parse(lqSlider),d=buildElements(g,g.a),$("#animation-slider").empty().append(d),initTicker()):"undefined"!=typeof lqHeader&&(c=JSON.parse(lqHeader),d=buildElements(c,c.a),$("#animation-slider").empty().append(d),$("#content").addClass("image_header_padding")),init(f)),"mobile"==f&&(buildNav(mobileData),$("#mobile_tools").append(tools),$(".languages-search").removeClass().wrap('<div class="mobile_language-search" />'),$(".help-links").removeClass().wrap('<div class="mobile_help-links" />'),$("#menusearch").append(search),$("#mobile_menubutton").unbind().click(mobileOpen),"undefined"!=typeof videoMobileSlider&&"undefined"!=typeof videoEnabled&&videoEnabled?(g=JSON.parse(videoMobileSlider),d=buildElements(g,g.a),$("#animation-slider").empty().append(d),"undefined"!=typeof videoHasMobileText&&videoHasMobileText||($("#animation-slider").addClass("only_title"),$("#animation-slider .box_holder_mobile a").addClass("only_title"))):"undefined"!=typeof mobileSlider&&"enabled"==sliderEnabled?(g=JSON.parse(mobileSlider),d=buildElements(g,g.a),$("#animation-slider").empty().append(d),initTicker("mobile")):"undefined"!=typeof mobileHeader?(c=JSON.parse(mobileHeader),d=buildElements(c,c.a),$("#animation-slider").empty().append(d),$("#content").addClass("image_header_padding")):($(".animation-slider-spacing").attr("style","display: none"),$(".animation-slider").attr("style","display: none")),initMobileNav()),searchFieldInit(),repositionCaption($("div#animation-slider"));var b;"undefined"!=typeof slide&&(b=$("#slide_"+slide)),("undefined"==typeof b||b.length<1)&&(b=$("#videoheader")),"undefined"!=typeof b&&b.length>0&&resizeMobileCaption(b)}function initMobileNav(){$("#sidenav-mobile").children().length?(mobileNaviOpen?($("#toggleIcon").text("-"),$("#header-show").hide(),$("#header-hide").show(),$("#toggleIcon").unbind().click(mobileSubpagesClose),$("#hide-mobile-menu").unbind().click(mobileSubpagesClose)):($("#mobile-navigation").unbind().click(mobileSubpagesOpen),$("#header-hide").hide(),$("#toggleIcon").unbind().click(mobileSubpagesOpen)),$("#mobile-navigation").addClass("mobile-pointer")):$("#mobile-navigation").hide()}function mobileClose(){$("#mobile_menuwrap").slideUp("fast"),$("#mobile_menubutton").unbind().click(mobileOpen)}function mobileOpen(){$("#mobile_menuwrap").slideDown("fast"),$("#mobile_menubutton").unbind().click(mobileClose)}function mobileSubpagesClose(){$("#sidenav-mobile").slideUp("fast"),$("#toggleIcon").text("+"),$("#toggleIcon").unbind().click(mobileSubpagesOpen),$("#header-hide").hide(),$("#header-show").show(),$("#header").removeClass("mobile-subpages-header-hidden").addClass("mobile-subpages-header-visible"),doOpen=!1,$("#mobile-navigation").unbind().click(mobileSubpagesOpen),$("#mobile-navigation").addClass("mobile-pointer"),mobileNaviOpen=!1}function mobileSubpagesOpen(){return doOpen?($("#sidenav-mobile").slideDown("fast"),$("#toggleIcon").text("-"),$("#header-show").hide(),$("#header-hide").show(),$("#toggleIcon").unbind().click(mobileSubpagesClose),$("#hide-mobile-menu").unbind().click(mobileSubpagesClose),$("#mobile-navigation").removeClass("mobile-pointer"),$("#hide-mobile-menu").addClass("mobile-pointer"),void (mobileNaviOpen=!0)):void (doOpen=!0)}function buildElements(c,b){var d,a;return d=$(b),c.b&&$.each(c.b,function(e){d.attr(c.b[e].c,c.b[e].d)}),c.f&&d.html(c.f),c.e&&$.each(c.e,function(e){a=buildElements(c.e[e],c.e[e].a),d.append(a)}),d}function buildNav(b){var a,c;a=$("<nav>"),$.each(b.nav.b,function(d){a.attr(b.nav.b[d].c,b.nav.b[d].d)}),$.each(b.nav.e,function(d){c=buildElements(b.nav.e[d],b.nav.e[d].a),a.append(c)}),$("#jsinput").append(a)}function scrollbar_width(){var b,a,c;return jQuery("body").height()>jQuery(window).height()?(b=jQuery('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div>'),jQuery("body").append(b),a=jQuery("div",b).innerWidth(),b.css("overflow-y","scroll"),c=jQuery("div",b).innerWidth(),jQuery(b).remove(),a-c):0}function responsiveControl(){var a;a=jQuery("body").width()+scrollbar_width(),(!windowWidth||1200>a&&windowWidth>=1200||a>=1200&&1200>windowWidth||1000>a&&windowWidth>=1000||a>=1000&&1000>windowWidth||720>a&&windowWidth>=720||a>=720&&720>windowWidth)&&(windowWidth&&($("#jsinput").empty(),$("#mobile_tools").empty(),$("#normal_tools").empty(),$("#crumb_search").empty(),$("#menusearch").empty(),$("#animation-slider").empty()),buildHTML(720>a?"mobile":1000>a?"tablet":1200>a?"compact":"normal")),windowWidth=a}function getInternetExplorerVersion(){var b=-1;if("Microsoft Internet Explorer"==navigator.appName){var a,c;a=navigator.userAgent,c=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!=c.exec(a)&&(b=parseFloat(RegExp.$1))}return b}function openYouTubeVideo(b){var a=$('<div class="youtube-popup"><iframe frameborder="0" allowfullscreen="1" width="100%" height="100%" src="'+b+'?autoplay=1&loop=0&rel=0&showinfo=0&controls=0&modestbranding=1&enablejsapi=1"></iframe><div class="close-video" onclick="closeYouTubeVideo(); ">X</div></div>'),c=$(".animation-slider .video-header video");c.length>0&&c[0].pause(),$("body > div.center").prepend(a)}function closeYouTubeVideo(){$("div.youtube-popup").remove();var a=$(".animation-slider .video-header video");a.length>0&&a[0].play()}function searchFieldInit(){$(".search_input").focus(function(){$(this).val()==$(this)[0].title&&($(this).css("color","#000"),$(this).val(""))}),$(".search_input").blur(function(){""==$(this).val()&&($(this).css("color","#999"),$(this).val($(this)[0].title))}),$(".search_input").blur()}function init(b){var a;for(a in dropdown){"undefined"!=typeof dropdown[a]&&(dontClose[a]=!1,count[".navigation_"+a]=0,$("#sub_navi_"+a).empty().append(dropdown[a]),"normal"==b&&$("#sub_navi_"+a).append(dropdownExt[a]),elementFunc(".navigation_",a),elementFunc("#sub_navi_",a),$(".navigation_"+a).removeClass("no-touch")),wasSelected[a]=$(".navigation_"+a).hasClass("selected")?!0:!1}return !0}function add(a){active=a,clearTimeout(timer),timer=window.setTimeout(function(){wasSelected[a]||$(".navigation_"+a).addClass("selected"),$("#sub_navi_"+a).fadeIn(100)},250)}function swap(b,a){clearTimeout(timer),clearTimeout(timer2),count[".navigation_"+b]--,$("#sub_navi_"+b).fadeOut(50),active=!1,wasSelected[b]||$(".navigation_"+b).removeClass("selected"),add(a)}function elementFunc(b,a){$(b+a).bind("touchstart",function(c){count[".navigation_"+a]++,count[".navigation_"+a]<2&&(dontClose[a]=!0,"none"==$("#sub_navi_"+a).css("display")&&(active?swap(active,a):add(a)),c.preventDefault())}),$(b+a).bind("touchend",function(){dontClose[a]=!1,clearTimeout(timer2),timer2=window.setTimeout(function(){dontClose[a]||(count[".navigation_"+a]--,$("#sub_navi_"+a).fadeOut(50,function(){active=!1,wasSelected[a]||$(".navigation_"+a).removeClass("selected")}))},5000)}),$(b+a).mouseenter(function(){dontClose[a]=!0,"none"==$("#sub_navi_"+a).css("display")&&(active?(clearTimeout(timer),timer=window.setTimeout(function(){swap(active,a)},200)):add(a))}).mouseleave(function(){dontClose[a]=!1,clearTimeout(timer),timer=window.setTimeout(function(){dontClose[a]?active=a:$("#sub_navi_"+a).fadeOut(50,function(){active==a&&(active=!1),wasSelected[a]||$(".navigation_"+a).removeClass("selected")})},50)})}function MitaNytSliderInit(){clearTimeout(mitaNytTimer),mitaNytTimer=window.setTimeout(function(){MitaNytTick()},5000)}function MitaNytTick(){$("#mita_nyt_slide_"+mitaNytSlide).fadeOut(400,MitaNytTickCallback())}function MitaNytTickCallback(){mitaNytSlide<mitaNytSlider?mitaNytSlide++:mitaNytSlide=0,$("#mita_nyt_slide_"+mitaNytSlide).fadeIn(400),MitaNytSliderInit()}function m_S(b,a){return b="def"==b?"lut.fi":b.replace(/ /gi,"."),a=a.replace(/ /gi,"."),a+"@"+b}function CheckResearchDBforUser(b,a,c){sM=m_S(b,a),$.ajax({type:"GET",url:"/c/portal/researchdb_get_xml?email="+sM,success:function(d){parseResearchDBRequest(d,c)}})}function parseResearchDBRequest(b,a){var c="ERROR_";""!=b&&b.substring(0,c.length)!=c?(closePersonnelPopup(),document.location=b+"?show=PUBLICATION&publyear=&type=All&endDate=&publyear=&lang=1"):(closePersonnelPopup(),$("#personnel_popup_"+a).fadeIn(100))}function closePersonnelPopup(){$(".personnel_popup_wrapper").fadeOut(100)}var windowWidth=!1;normal=JSON.stringify(normal);var normalData=JSON.parse(normal);mobile=JSON.stringify(mobile);var mobileData=JSON.parse(mobile),search,tools,initSld;search=$("#menusearch").html(),$("#menusearch").empty(),tools=$("#normal_tools").html(),$("#normal_tools").empty(),initSld=!0;var mobile_timer=!1;(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i))&&($("#viewport").attr("content","width=device-width,minimum-scale=1.0,maximum-scale=1.0,initial-scale=1.0"),$(window).bind("gesturestart",function(){clearTimeout(mobile_timer),$("#viewport").attr("content","width=device-width,minimum-scale=1.0,maximum-scale=10.0")}).bind("touchend",function(){clearTimeout(mobile_timer),mobile_timer=setTimeout(function(){$("#viewport").attr("content","width=device-width,minimum-scale=1.0,maximum-scale=1.0,initial-scale=1.0")},500)}));var doOpen=!0,mobileNaviOpen=!1,ie,css3;ie=getInternetExplorerVersion(),$(document).ready(function(){css3=ie>=9||"WebkitTransform" in document.body.style||"MozTransform" in document.body.style||"OTransform" in document.body.style||"transform" in document.body.style?!0:!1,css3?responsiveControl():buildHTML("normal"),"undefined"!=typeof mitaNytSlider&&mitaNytSlider>0&&MitaNytSliderInit(),searchFieldInit()});var dontClose=[],timer,timer2,wasSelected=[],active,count=[];active=!1,$(window).resize(function(){css3&&responsiveControl()});var mitaNytTimer,mitaNytSlide=0;